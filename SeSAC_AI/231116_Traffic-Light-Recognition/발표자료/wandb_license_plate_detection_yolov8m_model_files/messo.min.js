(function(w,d,r,index){var j=0;var e=r.elusive;var S=r.Snippet;var ssAKey='chmln:_account';var ssDKey='chmln:_debug';if(r.root){return;}else if(S&&!(S.mode==='user'&&r.mode==='admin')){return;}else if(/user/.test(e)){return(r.isDisabled=true);}r.fastUrl||(r.fastUrl='https://fast.trychameleon.com/');S=S||(r.Snippet={});S.version={git:'02052292a',when:"2023-09-22T21:19:37.313Z"};S.urls={fast:r.fastUrl};S.debug=_sdi;return _afs()?admin():user();function admin(){if(/admin/.test(e)){return(r.isDisabled=true);}var userToAdmin=S.mode==='user'&&r.mode==='admin';S.onload={chmln:i=>{w.chmln=i;cLoaded();},editor:i=>{w.chmln._Editor=i;loaded()}};r.isEditing=true;r.mode=S.mode='admin';return load(`edit/admin/${r.accountToken}/territory.js`,{cors:true},data);function data(){var t=r.territory,u=t&&t.user,d=_dfs(),vc=t&&t.assets.chmln,ve=t&&t.assets.editor,vcs=vc?vc.split(/,/):[],ves=ve?ve.split(/,/):[],cy=vcs.length===1,ey=ves.length===1;if(userToAdmin&&r._data_a){r._data_a.forEach(d=>d[0]&&d[0].habitat&&(delete d[0].habitat,delete d[0].configs));}r._data(t);if(u&&u.id){_fe(vcs,v=>load(`assets${d}/chmln/${v}/chmln.js`,null,cy?loaded:null));_fe(ves,v=>load(`assets${d}/editor/${v}/editor.js`,null,ey?loaded:null));}else{_wp(404,'error:account');return(r.isEditing=false);}}function cLoaded(){cCopy();loaded();}function loaded(){if(++j===2){start();edit(0);}}function edit(t){var r=w.chmln,E=r._Editor;if(!r.Builder){t>6?build410(w,r):setTimeout(edit.bind(this,++t),75+(t*25));}else if(E){r._Editor=null;E();r.Editor.start();_wp(200,'building');}}}function user(){var l;S.onload={chmln:i=>{w.chmln=i;start()}};r.mode=S.mode='user';r.identify=function(){r.identify_a.push(arguments);r.mode==='user'&&lt();};r.identify_a.length&&lt();/macro/.test(e)&&data();function lt(){if(!l){l=true;load(`edit/user/${r.accountToken}/territory.js`,null,data);}}function data(){var t=r.territory,a=t&&t.account,d=_dfs(),vc=t&&t.assets&&t.assets.chmln,vcs=vc?vc.split(/,/):[],cy=vcs.length===1;if(!(a&&a.id)||(t&&t.env.url_enabled==='off')){return(r.isDisabled=true);}r._data(t);_fe(vcs,v=>load(`assets${d}/chmln/${v}/chmln.js`,{defer:true},cy?start:null));}}function cCopy(){var c=w.chmln;_fe(Object.keys(r),k=>{if(r.hasOwnProperty(k)&&typeof c[k]==='undefined'){c[k]=r[k];}});c.location||(c.location=w.location.href.toString());c.now||(c.now=new Date());}function start(){cCopy();w.chmln.start();}function load(p,o,l){o||(o={});var s=d.createElement('script');s.crossOrigin=o.cors?'use-credentials':'anonymous';s.src=r.fastUrl+p;s.onload=function(){d.head.removeChild(s);l&&l.apply(this,arguments)};(o.defer&&d.readyState !=='complete')?w.addEventListener('load',()=>{d.head.appendChild(s);}):d.head.appendChild(s);}function build410(w,r){w.sessionStorage.removeItem(ssAKey);_wp(410,'error:extension');r.mode=null;r.clear&&r.clear();}function _afs(){var a;if((a=w.sessionStorage.getItem(ssAKey))){try{a=JSON.parse(a);}catch(e){}if(a&&a.token){if(_id62(a.token)===_id62(r.accountToken)){return a;}else{_wp(409,'error:account');}}return null;}}function _sdi(){var r=w.chmln;var snip_state='Chameleon'+(r.rootEl?'':' not')+' loaded',prof_state='User profile'+(r.data&&r.data.profile?'':' not')+' loaded',mode=r.mode||(S&&S.mode);if(r.isDisabled){return /admin|user/.test(r.elusive)?'Chameleon is disabled':'Domain disabled';}else if(chmln.rootEl===null){return snip_state+',Chameleon cleared';}else if(mode==='user'){return snip_state+','+prof_state;}else if(mode==='admin'){return 'Builder started,'+snip_state+','+prof_state;}return snip_state+',something unique went wrong';}function _dfs(){return w.sessionStorage.getItem(ssDKey)?'/debug':'';}function _fe(a,i){a&&a.forEach(i);}function _wp(c,m){w.postMessage({code:c,kind:`chmln:${m}`},'*');}function _id62(t){return t&&(t=t.split('-'))&&t[t.length-1];}})(window,document,window.chmln);